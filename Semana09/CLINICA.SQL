CREATE DATABASE CLINICA;
GO

USE CLINICA;
GO


CREATE TABLE dbo.PACIENTE
( 
	IDPACIENTE           integer IDENTITY ( 1,1 ) ,
	NOMBRE               varchar(50)  NOT NULL ,
	APELLIDO             varchar(50)  NOT NULL ,
	CONSTRAINT XPKPACIENTE PRIMARY KEY (IDPACIENTE ASC)
)
go



CREATE TABLE dbo.MEDICO
( 
	IDMEDICO             integer IDENTITY ( 1,1 ) ,
	NOMBRE               varchar(50)  NOT NULL ,
	APELLIDO             varchar(50)  NOT NULL ,
	CONSTRAINT XPKMEDICO PRIMARY KEY (IDMEDICO ASC)
)
go



CREATE TABLE dbo.INGRESO
( 
	IDINGRESO            integer IDENTITY ( 1,1 ) ,
	IDMEDICO             integer  NOT NULL ,
	IDPACIENTE           integer  NOT NULL ,
	FECHA                datetime  NOT NULL ,
	HABITACION           integer  NOT NULL ,
	CONSTRAINT XPKINGRESO PRIMARY KEY (IDINGRESO ASC),
	CONSTRAINT FK_INGRESO_MEDICO FOREIGN KEY (IDMEDICO) REFERENCES dbo.MEDICO(IDMEDICO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_INGRESO_PACIENTE FOREIGN KEY (IDPACIENTE) REFERENCES dbo.PACIENTE(IDPACIENTE)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE dbo.VISITA
( 
	IDVISITA             integer IDENTITY ( 1,1 ) ,
	IDMEDICO             integer  NOT NULL ,
	IDINGRESO            integer  NOT NULL ,
	FECHA                datetime  NOT NULL ,
	CONSTRAINT XPKVISITA PRIMARY KEY (IDVISITA ASC),
	CONSTRAINT FK_VISITA_MEDICO FOREIGN KEY (IDMEDICO) REFERENCES dbo.MEDICO(IDMEDICO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VISITA_INGRESO FOREIGN KEY (IDINGRESO) REFERENCES dbo.INGRESO(IDINGRESO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE dbo.ALTA
( 
	IDINGRESO            integer  NOT NULL ,
	IDMEDICO             integer  NOT NULL ,
	FECHA                datetime  NOT NULL ,
	CONSTRAINT XPKALTA PRIMARY KEY (IDINGRESO ASC),
	CONSTRAINT FK_ALTA_MEDICO FOREIGN KEY (IDMEDICO) REFERENCES dbo.MEDICO(IDMEDICO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_ALTA_INGRESO FOREIGN KEY (IDINGRESO) REFERENCES dbo.INGRESO(IDINGRESO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


